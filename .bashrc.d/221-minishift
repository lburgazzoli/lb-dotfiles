if [ -d ${LB_SFW_TOOLS_HOME}/minishift/bin ]; then
    pathadd ${LB_SFW_TOOLS_HOME}/minishift/bin

    if hash minishift 2>/dev/null; then
        source <(minishift completion bash)
    fi
fi

if hash operator-sdk 2>/dev/null; then
    source <(operator-sdk completion bash)
fi

function get-operator-sdk {
    if [ $# -eq 1 ]; then
        URL="https://github.com/operator-framework/operator-sdk/releases/download/v${1}/operator-sdk-v${1}-x86_64-linux-gnu"
        
        
        if [ ! -d ${LB_SFW_TOOLS_HOME}/k8s/bin ]; then
            mkdir -p ${LB_SFW_TOOLS_HOME}/k8s/bin
        fi

        echo "Downloading from: $URL"

        curl --location --silent $URL --output ${LB_SFW_TOOLS_HOME}/k8s/bin/operator-sdk-${1}
        chmod u+x ${LB_SFW_TOOLS_HOME}/k8s/bin/operator-sdk-${1}
    else
        echo "usage get-operator-sdk version"
    fi
}

function minishift-env {
    MINISHIFT_IP="$(minishift ip)"
    eval $(minishift docker-env)
    eval $(minishift oc-env)

    if hash oc 2>/dev/null; then
        source <(oc completion bash)
    fi
}

function minishift-login-adm {
    oc login \
        --username system:admin \
        --server "$(minishift ip):8443" \
        --insecure-skip-tls-verify \
        "$@"
}

function minishift-login {
    oc login \
        --username developer \
        --password developer \
        --server "$(minishift ip):8443" \
        --insecure-skip-tls-verify \
        "$@"
}

function minishift-setup-ko {
    eval $(minishift docker-env)
    export K8S_CLUSTER_OVERRIDE=$(minishift ip | sed -e 's/\./\-/g'):8443
    export K8S_USER_OVERRIDE=admin
    export KO_DOCKER_REPO='ko.local'
    export DOCKER_REPO_OVERRIDE="${KO_DOCKER_REPO}"
}

