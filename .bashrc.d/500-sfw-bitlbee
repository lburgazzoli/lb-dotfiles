function bitlbee {
    local DOCKER_IMAGE="lburgazzoli/app-bitlbee"
    local DOCKER_NAME="bitlbee"
    local DOCKER_USER=${LOGNAME}

    docker network ls | grep bitlbee 2>&1 > /dev/null
    if [ $? -ne 0 ]; then
        docker network create bitlbee
    fi

    docker run \
        --rm \
        --detach \
        --user root \
        --net bitlbee \
        --name ${DOCKER_NAME} \
        --volume /etc/localtime:/etc/localtime:ro \
        --volume /etc/machine-id:/etc/machine-id:ro \
        --volume $HOME/.config/bitlbee:/home/${DOCKER_USER}/.config/bitlbee:Z \
        ${DOCKER_IMAGE} \
            bitlbee -F -n -v -u ${DOCKER_USER} -d /home/${DOCKER_USER}/.config/bitlbee
}